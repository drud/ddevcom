'use strict';window.tsfSocial=function(){const a="undefined"!=typeof tsfSocialL10n&&tsfSocialL10n;let b={ogDescPlaceholder:a.states.placeholders.ogDesc,twDescPlaceholder:a.states.placeholders.twDesc};const c=a=>a?a in b?b[a]:void 0:b;return Object.assign({load:()=>{}},{initTitleInputs:b=>{let c=b.og,d=b.tw,e=b.ref,f=b.refNa,g=b.meta;if(!c||!d||!e||!f||!g)return;let h=a.params.homeLocks.ogTitleLock,i=a.params.homeLocks.ogTitlePHLock,j=a.params.homeLocks.twTitleLock,k=a.params.homeLocks.twTitlePHLock,l=h?c.placeholder:c.value,m=j?d.placeholder:d.value,n=f.innerHTML,o=e.innerHTML;const p=a=>{let b="";switchActive:switch(a){case"twitter":if(b=m,j||k){b=b.length?b:d.placeholder;break switchActive}case"og":if(b=b.length?b:l,h||i){b=b.length?b:c.placeholder;break switchActive}case"meta":case"ref":b.length||(tsfTitle.getStateOf(g.id,"useSocialTagline")?b=o:b=n);}return b},q=()=>{h||i||(c.placeholder=tsf.decodeEntities(p("meta"))),j||k||(d.placeholder=tsf.decodeEntities(p("og")))},r=(a,b,c)=>{let d=document.getElementById(a.id+"_chars");d&&tsfC.updateCharacterCounter({e:d,text:b,field:"title",type:c})};let s;const t=()=>{clearTimeout(s),s=setTimeout(()=>{r(c,p("og"),"opengraph"),r(d,p("twitter"),"twitter")},10)};let u;const v=()=>{clearTimeout(u),u=setTimeout(()=>{o=e.innerHTML,n=f.innerHTML,q(),t()},10)};e.addEventListener("change",v),f.addEventListener("change",v);c.addEventListener("input",a=>{if(!h){let b=a.target.value.trim();l=b.length?tsf.sDoubleSpace(b):""}q(),t()}),d.addEventListener("input",a=>{if(!j){let b=a.target.value.trim();m=b.length?tsf.sDoubleSpace(b):""}q(),t()})},initDescriptionInputs:c=>{let d=c.og,e=c.tw,f=c.ref,g=c.meta;if(!d||!e||!f||!g)return;let h=a.params.homeLocks.ogDescriptionLock,i=a.params.homeLocks.ogDescriptionPHLock,j=a.params.homeLocks.twDescriptionLock,k=a.params.homeLocks.twDescriptionPHLock,l=h?d.placeholder:d.value,m=j?e.placeholder:e.value,n=f.innerHTML;const o=(a,c)=>{let f="";switchActive:switch(a){case"twitter":if(f=m,j||k){f=f.length?f:e.placeholder;break switchActive}case"og":if(f=f.length?f:l,h||i){f=f.length?f:d.placeholder;break switchActive}case"meta":f.length||g.value.length||("twitter"===c?f=b.twDescPlaceholder:"og"==c&&(f=b.ogDescPlaceholder));case"ref":f=f.length?f:n;}return f},p=()=>{h||i||(d.placeholder=tsf.decodeEntities(o("meta","og"))),j||k||(e.placeholder=tsf.decodeEntities(o("og","twitter")))},q=(a,b,c)=>{let d=document.getElementById(a.id+"_chars");d&&tsfC.updateCharacterCounter({e:d,text:b,field:"description",type:c})};let r=0;const s=()=>{clearTimeout(r),r=setTimeout(()=>{q(d,o("og","og"),"opengraph"),q(e,o("twitter","twitter"),"twitter")},10)};f.addEventListener("change",()=>{n=f.innerHTML,p(),s()});d.addEventListener("input",a=>{if(!h){let b=a.target.value.trim();l=b.length?tsf.sDoubleSpace(b):""}p(),s()}),e.addEventListener("input",a=>{if(!j){let b=a.target.value.trim();m=b.length?tsf.sDoubleSpace(b):""}p(),s()})},getState:c,updateState:(a,c)=>{switch(b[a]=c,a){case"ogDescPlaceholder":case"twDescPlaceholder":break;default:}}},{l10n:a})}(jQuery),window.tsfSocial.load();
