!function(e,t,s,c){"use strict";var r,a=wpgdprcData.ajaxURL,n=wpgdprcData.ajaxSecurity,o=(r=0,function(e,t){clearTimeout(r),r=setTimeout(e,t)}),p=e(".wpgdprc"),i=e('input[type="checkbox"]',e(".wpgdprc-checkbox, .wpgdprc-setting",p)),d=e(".wpgdprc-select-all",p),l=e(".wpgdprc-form--process-delete-requests"),u=function(e){var t=e.data();return t.option||(t.option=e.attr("name")),e.is("input")&&(t.value=e.val(),e.is('input[type="checkbox"]')&&(t.enabled=e.is(":checked"))),t},g=function(t,s,c){var r=t.slice(0,1);if(r.length>0){var o=e(".wpgdprc-message",s),p=e('tr[data-id="'+r[0]+'"]',s);p.removeClass("wpgdprc-status--error"),p.addClass("wpgdprc-status--processing"),o.attr("style","display: none;"),o.removeClass("wpgdprc-message--error"),o.empty(),setTimeout(function(){e.ajax({url:a,type:"POST",dataType:"JSON",data:{action:"wpgdprc_process_delete_request",security:n,data:{id:r[0]}},success:function(c){c&&(p.removeClass("wpgdprc-status--processing"),c.error?(p.addClass("wpgdprc-status--error"),o.html(c.error),o.addClass("wpgdprc-message--error"),o.removeAttr("style")):(t.splice(0,1),e('input[type="checkbox"]',p).remove(),p.addClass("wpgdprc-status--removed"),e(".dashicons-no",p).removeClass("dashicons-no").addClass("dashicons-yes"),g(t,s,500)))}})},c||0)}},h=function(){i.length&&i.on("change",function(t){e(this).data("option")&&(t.preventDefault(),function(t){t.addClass("processing");var c=t.closest(".wpgdprc-checkbox"),r=!!c.length&&c.next(".wpgdprc-checkbox-data");e.ajax({url:a,type:"POST",dataType:"JSON",data:{action:"wpgdprc_process_settings",security:n,data:u(t)},success:function(e){e&&(e.error?(t.is(":checked")&&t.prop("checked",!1),t.addClass("alert")):(r.length&&(t.is(":checked")?r.stop(!0,!0).slideDown("fast"):r.stop(!0,!0).slideUp("fast")),e.redirect&&(s.location.href=currentPage)))},complete:function(){t.removeClass("processing"),o(function(){t.removeClass("alert")},2e3)}})}(e(this)))})},f=function(){l.length&&l.on("submit",function(t){t.preventDefault();var s=e(this),c=e(".wpgdprc-checkbox",s);d.prop("checked",!1),g(function(t){var s=[];return t.length&&t.each(function(){var t=e(this),c=t.val();t.is(":checked")&&c>0&&s.push(c)}),s}(c),s)})};e(function(){if(p.length){h(),d.length&&d.on("change",function(){var t=e(this),s=t.is(":checked");e('tbody input[type="checkbox"]',t.closest("table")).prop("checked",s)}),f();var t=s.getElementById("wpgdprc_snippet");if(null!==t)CodeMirror.fromTextArea(t,{mode:"text/html",lineNumbers:!0,matchBrackets:!0,indentUnit:4})}})}(jQuery,window,document);
