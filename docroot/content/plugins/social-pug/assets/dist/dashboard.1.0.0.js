jQuery(function(s){function t(t){s('.dpsp-social-platforms-sort-list li[data-network="'+t+'"]').remove(),s(".dpsp-social-platforms-sort-list li").removeClass("dpsp-last"),s(".dpsp-social-platforms-sort-list li").last().addClass("dpsp-last"),0==s(".dpsp-social-platforms-sort-list li").length&&(s(".dpsp-social-platforms-sort-list").fadeOut(1),s(".dpsp-social-platforms-sort-list").removeClass("dpsp-active"))}s(document).on("click",".dpsp-tool-wrapper .dpsp-switch label",function(t){var e=s(this).closest(".dpsp-tool-actions"),p=e.find(".dpsp-tool-settings");p.fadeOut(200),e.append('<div class="dpsp-tool-actions-overlay"><div class="spinner"></div></div>'),e.find(".dpsp-tool-actions-overlay").animate({opacity:1},200);var a,i,o=s(this).siblings("input").data("tool"),d=s(this).siblings("input").data("tool-activation");"undefined"!=o&&(e.hasClass("dpsp-inactive")?(a=d,i={action:"dpsp_activate_tool",dpsptkn:s("#dpsptkn").val(),setting:a},s.post(ajaxurl,i,function(){})).done(function(t){1==t&&(e.find(".dpsp-tool-actions-overlay").animate({opacity:0},200,function(){s(this).remove()}),e.removeClass("dpsp-inactive").addClass("dpsp-active"),e.find("span").text("Active"),p.fadeIn(200))}):function(t){var e={action:"dpsp_deactivate_tool",dpsptkn:s("#dpsptkn").val(),setting:t};return s.post(ajaxurl,e,function(){})}(d).done(function(t){var p;1==t&&(e.find(".dpsp-tool-actions-overlay").animate({opacity:0},200,function(){s(this).remove()}),e.removeClass("dpsp-active").addClass("dpsp-inactive"),e.find("span").text("Inactive"),p=(p=o).replace("share_","").replace("follow_","").replace("_","-"),s("#toplevel_page_dpsp-social-pug .wp-submenu li a").each(function(){-1!=s(this).attr("href").indexOf(p)&&s(this).parent().hide()}))}))}),s.fn.select2&&s(".dpsp-setting-field-select select").select2({minimumResultsForSearch:1/0}).on("select2:open",function(){s(".select2-container").last().addClass("dpsp-select2")}),s(function(){s(".dpsp-social-platforms-sort-list").sortable({handle:".dpsp-sort-handle",placeholder:"dpsp-sort-placeholder",containment:"#wpwrap"})}),s(document).on("click","#dpsp-networks-selector .dpsp-network-item",function(){$this=s(this),$checkbox=$this.children(".dpsp-network-item-checkbox"),$this.attr("data-checked")?$this.removeAttr("data-checked"):$this.attr("data-checked","true")}),s(document).on("click","#dpsp-select-networks",function(t){t.preventDefault(),s("#dpsp-networks-selector-wrapper").hasClass("dpsp-active")?(s("#dpsp-networks-selector-wrapper").removeClass("dpsp-active"),s("#dpsp-networks-selector-wrapper").stop().fadeOut(250,function(){0==s(".dpsp-social-platforms-sort-list").find("li").length?(s("#dpsp-sortable-networks-empty").stop().fadeIn(400),s("#dpsp-sortable-networks-empty").addClass("dpsp-active")):(s(".dpsp-social-platforms-sort-list").stop().fadeIn(400),s(".dpsp-social-platforms-sort-list").addClass("dpsp-active"))})):(s("#dpsp-select-networks").hide(),s("#dpsp-networks-selector-wrapper").addClass("dpsp-active"),0==s(".dpsp-social-platforms-sort-list").find("li").length?(s(".dpsp-social-platforms-sort-list").hide(),s("#dpsp-sortable-networks-empty").removeClass("dpsp-active"),s("#dpsp-sortable-networks-empty").stop().fadeOut(250,function(){s("#dpsp-networks-selector-wrapper").stop().fadeIn(250)})):(s(".dpsp-social-platforms-sort-list").removeClass("dpsp-active"),s(".dpsp-social-platforms-sort-list").stop().fadeOut(250,function(){s("#dpsp-networks-selector-wrapper").stop().fadeIn(250)})))}),s(document).on("click","#dpsp-networks-selector-footer a",function(e){e.preventDefault(),s("#dpsp-select-networks").show(),s("#dpsp-networks-selector .dpsp-network-item").each(function(){$this=s(this);var e=$this.attr("data-network"),p=$this.attr("data-network-name");if($this.attr("data-checked")){var a=!1;if(s(".dpsp-social-platforms-sort-list li").each(function(){s(this).attr("data-network")==e&&(a=!0)}),a)return a;!function(t,e){if("undefined"==t)return!1;if("undefined"==e)return!1;var p="",a=s('input[name="dpsp_buttons_location"]').val();p+='<li data-network="'+t+'">',p+='<div class="dpsp-sort-handle ui-sortable-handle">\x3c!-- --\x3e</div>',p+='<div class="dpsp-list-icon dpsp-list-icon-social dpsp-icon-'+t+" dpsp-background-color-network-"+t+'">\x3c!-- --\x3e</div>',p+='<div class="dpsp-list-input-wrapper"><input type="text" placeholder="This button has no label text." name="'+a+"[networks]["+t+'][label]" value="'+e+'"></div>',p+='<div class="dpsp-list-actions">',p+='<a class="dpsp-list-edit-label dpsp-transition" href="#"><span class="dashicons dashicons-edit"></span>Edit Label</a>',p+='<a class="dpsp-list-remove dpsp-transition" href="#"><span class="dashicons dashicons-no-alt"></span>Remove</a>',p+="</div>",p+="</li>",s(".dpsp-social-platforms-sort-list").append(p),s(".dpsp-social-platforms-sort-list li").removeClass("dpsp-last"),s(".dpsp-social-platforms-sort-list li").last().addClass("dpsp-last")}(e,p)}else t(e)}),s("#dpsp-networks-selector-wrapper").removeClass("dpsp-active").stop().fadeOut(250,function(){0==s(".dpsp-social-platforms-sort-list").find("li").length?(s("#dpsp-sortable-networks-empty").stop().fadeIn(250),s("#dpsp-sortable-networks-empty").addClass("dpsp-active")):(s(".dpsp-social-platforms-sort-list").stop().fadeIn(250),s(".dpsp-social-platforms-sort-list").addClass("dpsp-active"))})}),s(document).on("click",".dpsp-list-edit-label",function(t){t.preventDefault(),s(this).closest("li").find(".dpsp-list-input-wrapper input").focus().select()}),s(document).on("click",".dpsp-list-remove",function(e){e.preventDefault();var p=s(this).closest("li").attr("data-network");t(p),s('#dpsp-networks-selector .dpsp-network-item[data-network="'+p+'"]').removeAttr("data-checked"),0==s(".dpsp-social-platforms-sort-list").find("li").length&&(s("#dpsp-sortable-networks-empty").stop().fadeIn(250),s("#dpsp-sortable-networks-empty").addClass("dpsp-active"),s(".dpsp-social-platforms-sort-list").removeClass("dpsp-active"))}),s(document).ready(function(){s(".dpsp-network-btn").attr("href","#")}),s(document).on("click",".dpsp-network-btn",function(t){t.preventDefault(),s(this).closest("label").click()}),s(document).on("focus",".dpsp-page-mobile .dpsp-list-input-wrapper input",function(){s(this).blur()}),s(document).on("click",".dpsp-setting-field-button-shape input",function(){s(this).closest(".dpsp-page-wrapper").find(".dpsp-networks-btns-wrapper").parent().removeClass("dpsp-shape-circle dpsp-shape-rounded dpsp-shape-rectangular").addClass("dpsp-shape-"+s(this).val())}),s(document).on("mouseenter",".dpsp-setting-field-tooltip-icon",function(){s(this).siblings("div").css("opacity",1).css("visibility","visible")}),s(document).on("mouseleave",".dpsp-setting-field-tooltip-icon",function(){s(this).siblings("div").css("opacity",0).css("visibility","hidden")}),s(document).on("mouseenter",".dpsp-setting-field-tooltip-wrapper.dpsp-has-link",function(){s(this).find("div").css("opacity",1).css("visibility","visible")}),s(document).on("mouseleave",".dpsp-setting-field-tooltip-wrapper.dpsp-has-link",function(){s(this).find("div").css("opacity",0).css("visibility","hidden")}),s(document).on("change",".dpsp-setting-field-wrapper *",function(){s(".dpsp-card-inner").each(function(){s(this).find(".dpsp-setting-field-wrapper").removeClass("dpsp-last"),s(this).find(".dpsp-setting-field-wrapper:not(.disabled)").last().addClass("dpsp-last")})}),s(".dpsp-setting-field-wrapper *").first().trigger("change"),s(function(){function t(){$checkbox_total_shares.is(":checked")||$checkbox_shares.is(":checked")?($wrapper_checkbox_count_round.removeClass("disabled"),$checkbox_count_round.attr("disabled",!1)):($wrapper_checkbox_count_round.addClass("disabled"),$checkbox_count_round.attr("disabled",!0))}$checkbox_shares=s(".dpsp-setting-field-show-share-count input[type=checkbox]"),$checkbox_total_shares=s(".dpsp-setting-field-show-total-share-count input[type=checkbox]"),$checkbox_count_round=s(".dpsp-setting-field-share-count-round input[type=checkbox]"),$wrapper_checkbox_count_round=$checkbox_count_round.closest(".dpsp-setting-field-wrapper"),$checkbox_total_shares.is(":checked")||($checkbox_total_shares.closest(".dpsp-setting-field-wrapper").next().addClass("disabled"),$checkbox_total_shares.closest(".dpsp-setting-field-wrapper").next().find("select").attr("disabled",!0)),$checkbox_total_shares.change(function(){$checkbox_total_shares.is(":checked")?($checkbox_total_shares.closest(".dpsp-setting-field-wrapper").next().removeClass("disabled"),$checkbox_total_shares.closest(".dpsp-setting-field-wrapper").next().find("select").attr("disabled",!1)):($checkbox_total_shares.closest(".dpsp-setting-field-wrapper").next().addClass("disabled"),$checkbox_total_shares.closest(".dpsp-setting-field-wrapper").next().find("select").attr("disabled",!0))}),t(),$checkbox_shares.change(function(){t()}),$checkbox_total_shares.change(function(){t()})}),s(document).on("click","#dpsp-refresh-share-counts",function(t){if(t.preventDefault(),s(this).hasClass("disabled"))return!1;$refresh_button=s(this),$spinner=$refresh_button.siblings(".spinner"),$refresh_button.addClass("disabled"),$spinner.css("visibility","visible"),s(".dpsp-statistic-bar-wrapper-network").css("opacity",.6);var e={action:"dpsp_refresh_share_counts",nonce:$refresh_button.siblings('[name="dpsp_refresh_share_counts"]').val(),post_id:parseInt(s("#post_ID").val())};s.post(ajaxurl,e,function(t){t&&s(".dpsp-statistic-bars-wrapper").replaceWith(t)})}),s(document).on("change",'[name="dpsp_settings[facebook_share_counts_provider]"]',function(){s(".dpsp-setting-field-facebook-authorize-app").hide(),s(".dpsp-setting-field-facebook-app-id, .dpsp-setting-field-facebook-app-secret").hide(),"authorized_app"==s(this).val()&&s(".dpsp-setting-field-facebook-authorize-app").show(),"own_app"==s(this).val()&&s(".dpsp-setting-field-facebook-app-id, .dpsp-setting-field-facebook-app-secret").show()}),s('[name="dpsp_settings[facebook_share_counts_provider]"]').trigger("change"),s(document).on("keyup","#dpsp-deactivate-modal [name=dpsp_disable_text]",function(){""!=s(this).val()?s("#dpsp-feedback-submit").attr("disabled",!1):s("#dpsp-feedback-submit").attr("disabled",!0)}),s(document).on("keyup","#dpsp-deactivate-modal [name=dpsp_disable_from]",function(){var t;t=s(this).val(),/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(t).toLowerCase())?s("#dpsp-feedback-submit").attr("disabled",!1):s("#dpsp-feedback-submit").attr("disabled",!0)}),s("#dpsp-feedback-submit").click(function(t){t.preventDefault(),s("#dpsp-deactivate-modal").hide(),s.ajax({type:"POST",url:ajaxurl,dataType:"json",data:{action:"dpsp_send_deactivation_feedback",data:s("#dpsp-deactivate-modal form").serialize()},complete:function(t,e,p){s("#dpsp-deactivate-modal").remove(),window.location.href=s('.wp-admin.plugins-php tr[data-slug="social-pug"] .row-actions .deactivate a').attr("href")}})}),s("#dpsp-only-deactivate").click(function(t){t.preventDefault(),s("#dpsp-deactivate-modal").hide(),s("#dpsp-deactivate-modal").remove(),window.location.href=s('.wp-admin.plugins-php tr[data-slug="social-pug"] .row-actions .deactivate a').attr("href")}),s(".dpsp-deactivate-close").click(function(t){t.preventDefault(),s("#dpsp-deactivate-modal").hide()})});